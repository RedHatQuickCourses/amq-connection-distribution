<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Risk of high-volume queues paging messages to disk :: ActiveMQ Artemis Clustering for High-Performance Messaging</title>
    <link rel="prev" href="reduced-cluster-throughput-due-to-message-redistribution.html">
    <link rel="next" href="../deploying-amq-on-openshift/deploying-amq-on-openshift.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">ActiveMQ Artemis Clustering for High-Performance Messaging</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="amq-connection-distribution" data-version="1.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">ActiveMQ Artemis Clustering for High-Performance Messaging</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../introduction-to-activemq-artemis/introduction-to-activemq-artemis.html">Introduction to ActiveMQ Artemis</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-activemq-artemis/understanding-message-oriented-middleware-mom.html">Understanding Message-Oriented Middleware (MOM)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-activemq-artemis/core-features-and-benefits-of-activemq-artemis.html">Core features and benefits of ActiveMQ Artemis</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-activemq-artemis/decoupling-producers-and-consumers.html">Decoupling Producers and Consumers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-activemq-artemis/asynchronous-communication-patterns.html">Asynchronous communication patterns</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-activemq-artemis/traffic-smoothing-and-competing-consumers.html">Traffic smoothing and competing consumers</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="client-side-challenges.html">Client-Side Challenges</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bottlenecks-from-single-connection-to-a-single-broker.html">Bottlenecks from single connection to a single broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="impact-of-default-client-load-balancing-policies.html">Impact of default client load-balancing policies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reduced-cluster-throughput-due-to-message-redistribution.html">Reduced cluster throughput due to message redistribution</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="risk-of-high-volume-queues-paging-messages-to-disk.html">Risk of high-volume queues paging messages to disk</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../deploying-amq-on-openshift/deploying-amq-on-openshift.html">Deploying AMQ on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-on-openshift/overview-of-red-hat-amq-operator.html">Overview of Red Hat AMQ Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-on-openshift/installing-the-amq-operator-on-openshift.html">Installing the AMQ Operator on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-on-openshift/creating-an-activemqartemis-custom-resource-cr.html">Creating an ActiveMQArtemis Custom Resource (CR)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-on-openshift/configuring-a-two-node-activemq-artemis-cluster.html">Configuring a two-node ActiveMQ Artemis cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-on-openshift/exposing-broker-services-for-client-connections.html">Exposing broker services for client connections</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../solutions-for-even-message-distribution/solutions-for-even-message-distribution.html">Solutions for Even Message Distribution</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../solutions-for-even-message-distribution/strategies-for-client-side-load-balancing.html">Strategies for client-side load balancing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../solutions-for-even-message-distribution/configuring-client-connection-factories-for-multiple-brokers.html">Configuring client connection factories for multiple brokers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../solutions-for-even-message-distribution/techniques-to-distribute-messages-evenly-across-cluster-members.html">Techniques to distribute messages evenly across cluster members</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../solutions-for-even-message-distribution/optimizing-client-connectivity-for-high-throughput.html">Optimizing client connectivity for high throughput</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../hands-on-lab-deploying-and-interacting-with-an-activemq-artemis-cluster/hands-on-lab-deploying-and-interacting-with-an-activemq-artemis-cluster.html">Hands-on Lab: Deploying and Interacting with an ActiveMQ Artemis Cluster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-interacting-with-an-activemq-artemis-cluster/setting-up-the-openshift-environment-for-amq-deployment.html">Setting up the OpenShift environment for AMQ deployment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-interacting-with-an-activemq-artemis-cluster/deploying-a-two-node-activemq-artemis-cluster-using-the-operator.html">Deploying a two-node ActiveMQ Artemis cluster using the Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-interacting-with-an-activemq-artemis-cluster/developing-and-deploying-client-applications.html">Developing and deploying client applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-interacting-with-an-activemq-artemis-cluster/observing-message-distribution-and-cluster-behavior.html">Observing message distribution and cluster behavior</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-interacting-with-an-activemq-artemis-cluster/testing-failover-scenarios-and-ha-capabilities.html">Testing failover scenarios and HA capabilities</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">ActiveMQ Artemis Clustering for High-Performance Messaging</span>
    <span class="version">1.0.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">ActiveMQ Artemis Clustering for High-Performance Messaging</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">ActiveMQ Artemis Clustering for High-Performance Messaging</a></li>
    <li><a href="client-side-challenges.html">Client-Side Challenges</a></li>
    <li><a href="risk-of-high-volume-queues-paging-messages-to-disk.html">Risk of high-volume queues paging messages to disk</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Risk of high-volume queues paging messages to disk</h1>
<h1 id="_risk_of_high_volume_queues_paging_messages_to_disk" class="sect0"><a class="anchor" href="#_risk_of_high_volume_queues_paging_messages_to_disk"></a>Risk of High-Volume Queues Paging Messages to Disk</h1>
<div class="paragraph">
<p>Understanding the underlying mechanisms of message queuing is crucial for building robust and performant messaging systems. While ActiveMQ Artemis excels at buffering messages and smoothing traffic, high message volumes under specific conditions can lead to a phenomenon known as "paging messages to disk," which significantly impacts performance.</p>
</div>
<div class="sect1">
<h2 id="_detailed_technical_explanation_paging_messages_to_disk"><a class="anchor" href="#_detailed_technical_explanation_paging_messages_to_disk"></a>Detailed Technical Explanation: Paging Messages to Disk</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ActiveMQ Artemis, like other Message-Oriented Middleware (MOMs), manages incoming messages in memory for rapid access by consumers. This in-memory storage acts as a high-speed buffer, essential for the "Traffic Smoothing" pattern where sudden spikes in producer traffic are absorbed by the queue, allowing consumers to process the backlog at a sustainable pace.</p>
</div>
<div class="paragraph">
<p>However, this in-memory buffer is finite. When the rate at which producers send messages consistently outpaces the rate at which consumers process them, messages accumulate in the queues. If this accumulation exceeds the broker&#8217;s configured memory limits for a particular queue or address, ActiveMQ Artemis must take action to prevent an out-of-memory condition and maintain the broker&#8217;s stability. The solution is to <strong>page</strong> these pending messages from volatile RAM to persistent storage (disk).</p>
</div>
<div class="paragraph">
<p>The provided context highlights a key scenario where this risk intensifies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Client-Side Bottlenecks:</strong> As stated in the context, "an application typically establishes a single connection to a single broker, creating a bottleneck." This single point of entry can quickly become overwhelmed by high message volumes, causing messages to back up on that specific broker or queue, even if other brokers in a cluster might have capacity.</p>
</li>
<li>
<p><strong>Inefficient Message Redistribution in Clusters:</strong> While ActiveMQ Artemis clusters offer server-side load balancing and can move messages between nodes (via <code>redistribution-delay</code> configuration), the context explicitly warns: "Reliance on message redistribution reduces overall cluster throughput and can force high-volume queues to page pending messages to disk." This indicates that if messages are not efficiently distributed to consumers at the point of entry and instead require significant internal cluster redistribution, the overhead involved can contribute to queues swelling beyond their memory capacity. The process of moving messages between nodes consumes resources and adds latency, making it harder for the system to keep up with high ingress rates.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When messages are paged to disk, their retrieval and processing become dependent on disk I/O operations, which are orders of magnitude slower than memory access. This transition from memory to disk has several critical implications:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Significant Performance Degradation:</strong> The primary consequence is a drastic reduction in throughput and an increase in message latency. Disk access introduces unavoidable delays, slowing down message delivery to consumers.</p>
</li>
<li>
<p><strong>Increased Resource Utilization:</strong> Paging operations consume additional CPU cycles for disk I/O management and can put stress on the underlying storage subsystem.</p>
</li>
<li>
<p><strong>Reduced System Responsiveness:</strong> Under severe paging conditions, the broker can become less responsive, potentially affecting other operations and the overall stability of the messaging system.</p>
</li>
<li>
<p><strong>Potential for Disk Wear:</strong> For systems with high and sustained paging, the constant read/write operations can contribute to accelerated wear on physical disk drives or SSDs.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Effectively mitigating the risk of high-volume queues paging messages to disk involves strategies that ensure messages are consumed as efficiently as they are produced, ideally without needing costly intra-cluster redistribution. This typically involves optimizing client-side load balancing to distribute messages evenly across multiple brokers and their respective queues, thereby preventing any single queue from becoming a bottleneck.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="reduced-cluster-throughput-due-to-message-redistribution.html">Reduced cluster throughput due to message redistribution</a></span>
  <span class="next"><a href="../deploying-amq-on-openshift/deploying-amq-on-openshift.html">Deploying AMQ on OpenShift</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
