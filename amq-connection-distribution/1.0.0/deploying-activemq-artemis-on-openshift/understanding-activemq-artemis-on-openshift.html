<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Understanding ActiveMQ Artemis on OpenShift :: ActiveMQ Artemis Clustering and High Availability</title>
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">ActiveMQ Artemis Clustering and High Availability</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="amq-connection-distribution" data-version="1.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">ActiveMQ Artemis Clustering and High Availability</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../message-oriented-middleware-introduction/message-oriented-middleware-introduction.html">Message Oriented Middleware Introduction</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../message-oriented-middleware-introduction/role-of-mom-in-distributed-systems.html">Role of MOM in distributed systems</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../message-oriented-middleware-introduction/benefits-of-asynchronous-communication.html">Benefits of asynchronous communication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../message-oriented-middleware-introduction/ensuring-resilience-and-reliability-with-mom.html">Ensuring resilience and reliability with MOM</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../message-oriented-middleware-introduction/introduction-to-activemq-artemis.html">Introduction to ActiveMQ Artemis</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../message-oriented-middleware-introduction/key-features-and-architecture-of-activemq-artemis.html">Key features and architecture of ActiveMQ Artemis</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../challenges-with-clustered-brokers/challenges-with-clustered-brokers.html">Challenges with clustered brokers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../challenges-with-clustered-brokers/uneven-connection-distribution-across-cluster-nodes.html">Uneven connection distribution across cluster nodes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../challenges-with-clustered-brokers/bottlenecks-from-single-connection-points.html">Bottlenecks from single connection points</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../challenges-with-clustered-brokers/overhead-and-impact-of-message-redistribution.html">Overhead and impact of message redistribution</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../challenges-with-clustered-brokers/reduced-cluster-throughput-in-specific-scenarios.html">Reduced cluster throughput in specific scenarios</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../challenges-with-clustered-brokers/disk-paging-issues-for-high-volume-queues.html">Disk paging issues for high-volume queues</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../solutions/solutions.html">Solutions</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../solutions/activemq-artemis-clustering-overview.html">ActiveMQ Artemis clustering overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../solutions/high-availability-ha-and-automatic-failover.html">High Availability (HA) and automatic failover</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../solutions/server-side-message-load-balancing.html">Server-side message load balancing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../solutions/scaling-with-competing-consumers.html">Scaling with competing consumers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../solutions/deploying-activemq-artemis-on-openshift.html">Deploying ActiveMQ Artemis on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../solutions/utilizing-the-red-hat-amq-operator.html">Utilizing the Red Hat AMQ Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../solutions/configuring-activemqartemis-custom-resources-for-clustering.html">Configuring ActiveMQArtemis Custom Resources for clustering</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../code-examples/code-examples.html">Code Examples</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../code-examples/developing-producer-applications-for-activemq-artemis.html">Developing producer applications for ActiveMQ Artemis</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../code-examples/developing-consumer-applications-for-activemq-artemis.html">Developing consumer applications for ActiveMQ Artemis</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../code-examples/connecting-clients-to-a-clustered-artemis-environment.html">Connecting clients to a clustered Artemis environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../code-examples/demonstrating-message-publishing-and-consumption-patterns.html">Demonstrating message publishing and consumption patterns</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">ActiveMQ Artemis Clustering and High Availability</span>
    <span class="version">1.0.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">ActiveMQ Artemis Clustering and High Availability</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">ActiveMQ Artemis Clustering and High Availability</a></li>
    <li><a href="understanding-activemq-artemis-on-openshift.html">Understanding ActiveMQ Artemis on OpenShift</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Understanding ActiveMQ Artemis on OpenShift</h1>
<h1 id="_understanding_activemq_artemis_on_openshift" class="sect0"><a class="anchor" href="#_understanding_activemq_artemis_on_openshift"></a>Understanding ActiveMQ Artemis on OpenShift</h1>
<div class="paragraph">
<p>ActiveMQ Artemis is a high-performance, non-blocking, asynchronous messaging system that can be deployed across various environments. When deployed on OpenShift, an enterprise Kubernetes platform, Artemis leverages the powerful orchestration and management capabilities of the platform to achieve high availability, scalability, and simplified operations for messaging applications.</p>
</div>
<div class="paragraph">
<p>This section explores the fundamental concepts and advantages of running ActiveMQ Artemis within the OpenShift ecosystem.</p>
</div>
<div class="sect2">
<h3 id="_activemq_artemis_a_brief_overview"><a class="anchor" href="#_activemq_artemis_a_brief_overview"></a>ActiveMQ Artemis: A Brief Overview</h3>
<div class="paragraph">
<p>ActiveMQ Artemis is a popular open-source, multi-protocol message broker from Apache. It supports a wide range of messaging protocols including AMQP, JMS, MQTT, STOMP, and OpenWire. Its core strengths lie in its high throughput, low latency, robust message persistence, and flexible clustering capabilities, making it an ideal choice for mission-critical applications requiring reliable message delivery.</p>
</div>
</div>
<div class="sect2">
<h3 id="_openshift_an_enterprise_kubernetes_platform"><a class="anchor" href="#_openshift_an_enterprise_kubernetes_platform"></a>OpenShift: An Enterprise Kubernetes Platform</h3>
<div class="paragraph">
<p>OpenShift is a Red Hat distribution of Kubernetes, enhanced with developer and operator tools, built-in security features, and enterprise-grade support. It provides a platform for deploying, managing, and scaling containerized applications. Key features of OpenShift relevant to messaging applications include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Container Orchestration</strong>: Automates the deployment, scaling, and management of application containers.</p>
</li>
<li>
<p><strong>Self-Service Developer Experience</strong>: Tools and workflows for developers to quickly build, deploy, and scale applications.</p>
</li>
<li>
<p><strong>Robust Networking</strong>: Advanced networking features for communication between services and external access.</p>
</li>
<li>
<p><strong>Integrated Storage</strong>: Mechanisms for persistent storage, crucial for stateful applications like message brokers.</p>
</li>
<li>
<p><strong>Security and Compliance</strong>: Enhanced security features for containerized workloads.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_why_deploy_activemq_artemis_on_openshift"><a class="anchor" href="#_why_deploy_activemq_artemis_on_openshift"></a>Why Deploy ActiveMQ Artemis on OpenShift?</h3>
<div class="paragraph">
<p>Deploying ActiveMQ Artemis on OpenShift combines the power of a resilient message broker with the robust orchestration capabilities of a leading container platform. This synergy offers several significant advantages:</p>
</div>
<div class="sect3">
<h4 id="_enhanced_high_availability_and_resilience"><a class="anchor" href="#_enhanced_high_availability_and_resilience"></a>Enhanced High Availability and Resilience</h4>
<div class="paragraph">
<p>OpenShift inherently provides mechanisms for ensuring application uptime and resilience. When Artemis runs on OpenShift:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Automatic Restarts</strong>: If an Artemis pod fails, OpenShift automatically restarts it or schedules it on a healthy node, minimizing downtime.</p>
</li>
<li>
<p><strong>Node Failure Recovery</strong>: In case of a node failure, OpenShift reschedules Artemis pods to healthy nodes, contributing to overall system resilience.</p>
</li>
<li>
<p><strong>Anti-Affinity</strong>: OpenShift can be configured to distribute Artemis instances across different nodes or availability zones, preventing a single point of failure.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_scalability_and_elasticity"><a class="anchor" href="#_scalability_and_elasticity"></a>Scalability and Elasticity</h4>
<div class="paragraph">
<p>OpenShift makes it easy to scale Artemis brokers up or down based on demand:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Horizontal Scaling</strong>: New Artemis instances (pods) can be added or removed dynamically to handle varying message loads.</p>
</li>
<li>
<p><strong>Resource Management</strong>: OpenShift allows setting CPU and memory requests and limits for Artemis pods, ensuring efficient resource utilization and preventing resource starvation.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_simplified_management_and_operations"><a class="anchor" href="#_simplified_management_and_operations"></a>Simplified Management and Operations</h4>
<div class="paragraph">
<p>OpenShift streamlines many operational tasks associated with running a message broker:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Automated Deployment</strong>: Declarative configurations (YAML manifests) define the desired state of the Artemis deployment, enabling automated, repeatable deployments.</p>
</li>
<li>
<p><strong>Rolling Updates</strong>: OpenShift supports rolling updates, allowing new versions of Artemis to be deployed with minimal disruption to service.</p>
</li>
<li>
<p><strong>Centralized Logging and Monitoring</strong>: Integration with OpenShift&#8217;s logging (e.g., OpenShift Logging) and monitoring (e.g., OpenShift Monitoring with Prometheus/Grafana) solutions provides a unified view of Artemis broker health and performance.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_consistent_environment"><a class="anchor" href="#_consistent_environment"></a>Consistent Environment</h4>
<div class="paragraph">
<p>Containers provide a consistent runtime environment from development to production, eliminating "it works on my machine" issues. This consistency extends to Artemis, ensuring that the broker behaves predictably across all environments.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_key_concepts_for_activemq_artemis_on_openshift"><a class="anchor" href="#_key_concepts_for_activemq_artemis_on_openshift"></a>Key Concepts for ActiveMQ Artemis on OpenShift</h3>
<div class="paragraph">
<p>Understanding the following OpenShift/Kubernetes concepts is crucial for effectively deploying and managing ActiveMQ Artemis:</p>
</div>
<div class="sect3">
<h4 id="_pods"><a class="anchor" href="#_pods"></a>Pods</h4>
<div class="paragraph">
<p>A pod is the smallest deployable unit in Kubernetes/OpenShift. An ActiveMQ Artemis instance typically runs within a single pod. Each pod encapsulates one or more containers, storage resources, a unique network IP, and options that govern how the container(s) should run.</p>
</div>
</div>
<div class="sect3">
<h4 id="_statefulsets"><a class="anchor" href="#_statefulsets"></a>StatefulSets</h4>
<div class="paragraph">
<p>While general stateless applications often use <code>Deployments</code>, ActiveMQ Artemis, being a stateful application that requires stable, unique network identifiers, stable persistent storage, and ordered graceful deployment/scaling/deletion, is best deployed using an OpenShift <code>StatefulSet</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Stable Network Identifiers</strong>: Each pod in a StatefulSet maintains a stable hostname and network identity.</p>
</li>
<li>
<p><strong>Stable Persistent Storage</strong>: StatefulSets are associated with Persistent Volume Claims (PVCs), ensuring that each Artemis instance has its own dedicated and persistent storage, critical for message durability.</p>
</li>
<li>
<p><strong>Ordered Operations</strong>: StatefulSets guarantee ordered startup and shutdown of pods, which is essential for certain Artemis clustering configurations.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_persistent_storage"><a class="anchor" href="#_persistent_storage"></a>Persistent Storage</h4>
<div class="paragraph">
<p>For ActiveMQ Artemis to guarantee message durability, it requires persistent storage for its journal and data files. OpenShift provides this through:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Persistent Volumes (PVs)</strong>: Abstract the underlying storage infrastructure (e.g., NFS, Ceph, AWS EBS, OpenShift Container Storage).</p>
</li>
<li>
<p><strong>Persistent Volume Claims (PVCs)</strong>: Requests for PVs made by pods. A StatefulSet for Artemis will typically define a <code>volumeClaimTemplates</code> to automatically provision a PVC for each broker instance.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_networking_and_service_discovery"><a class="anchor" href="#_networking_and_service_discovery"></a>Networking and Service Discovery</h4>
<div class="paragraph">
<p>Clients need to connect to Artemis brokers, and brokers need to communicate with each other in a cluster. OpenShift provides several networking constructs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Services</strong>: An abstract way to expose an application running on a set of pods as a network service.</p>
</li>
<li>
<p><strong>Headless Services</strong>: Often used with StatefulSets for internal cluster communication, allowing direct access to individual pod IPs.</p>
</li>
<li>
<p><strong>ClusterIP Services</strong>: Provide a stable internal IP for a set of pods, typically used for internal load balancing.</p>
</li>
<li>
<p><strong>Routes</strong>: OpenShift&#8217;s way of exposing a <code>Service</code> to the outside world, providing an externally reachable hostname. Routes often integrate with OpenShift&#8217;s built-in HAProxy-based router for load balancing and SSL termination.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_configuration_management"><a class="anchor" href="#_configuration_management"></a>Configuration Management</h4>
<div class="paragraph">
<p>ActiveMQ Artemis can be configured through various means within OpenShift:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ConfigMaps</strong>: Used to inject non-sensitive configuration data (e.g., <code>broker.xml</code> modifications, environment variables for JVM tuning) into pods.</p>
</li>
<li>
<p><strong>Secrets</strong>: Used to store and inject sensitive data (e.g., passwords, keystores) securely into pods.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_the_activemq_artemis_operator"><a class="anchor" href="#_the_activemq_artemis_operator"></a>The ActiveMQ Artemis Operator</h4>
<div class="paragraph">
<p>While direct deployment using StatefulSets, Services, and Routes is possible, it can be complex to manage the lifecycle of a sophisticated application like Artemis. This is where the <strong>ActiveMQ Artemis Operator</strong> comes into play. The Operator automates the deployment, scaling, configuration, and maintenance of Artemis instances on OpenShift, simplifying operations significantly. It understands the specific requirements of Artemis and translates high-level desired states into concrete OpenShift resources. The next section will delve deeper into using this Operator.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
