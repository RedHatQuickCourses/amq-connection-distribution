<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Setting up a basic message broker :: Understanding and Implementing Message Oriented Middleware</title>
    <link rel="prev" href="hands-on-lab-implementing-messaging-patterns.html">
    <link rel="next" href="developing-a-producer-for-point-to-point-messaging.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Understanding and Implementing Message Oriented Middleware</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="amq-connection-distribution" data-version="1.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Understanding and Implementing Message Oriented Middleware</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../introduction-to-message-oriented-middleware-mom/introduction-to-message-oriented-middleware-mom.html">Introduction to Message Oriented Middleware (MOM)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-message-oriented-middleware-mom/what-is-message-oriented-middleware.html">What is Message Oriented Middleware?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-message-oriented-middleware-mom/core-concepts-messages-producers-consumers-brokers.html">Core concepts: Messages, Producers, Consumers, Brokers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-message-oriented-middleware-mom/benefits-of-mom-in-distributed-systems.html">Benefits of MOM in distributed systems</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-message-oriented-middleware-mom/common-use-cases-for-mom.html">Common use cases for MOM</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../challenges-in-distributed-systems/challenges-in-distributed-systems.html">Challenges in Distributed Systems</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../challenges-in-distributed-systems/issues-with-direct-service-to-service-communication.html">Issues with direct service-to-service communication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../challenges-in-distributed-systems/the-need-for-asynchronous-processing.html">The need for asynchronous processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../challenges-in-distributed-systems/problems-with-reliability-and-data-consistency.html">Problems with reliability and data consistency</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../challenges-in-distributed-systems/scalability-and-coupling-concerns.html">Scalability and coupling concerns</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/mom-solutions-for-distributed-systems.html">MOM Solutions for Distributed Systems</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/decoupling-services-with-message-queues.html">Decoupling services with message queues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/point-to-point-ptp-messaging-model.html">Point-to-Point (PTP) messaging model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/publishsubscribe-pubsub-messaging-model.html">Publish/Subscribe (Pub/Sub) messaging model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/ensuring-message-delivery-and-reliability.html">Ensuring message delivery and reliability</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/message-persistence-and-durability.html">Message persistence and durability</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="hands-on-lab-implementing-messaging-patterns.html">Hands-on Lab: Implementing Messaging Patterns</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="setting-up-a-basic-message-broker.html">Setting up a basic message broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="developing-a-producer-for-point-to-point-messaging.html">Developing a producer for Point-to-Point messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="developing-a-consumer-for-point-to-point-messaging.html">Developing a consumer for Point-to-Point messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="implementing-a-publisher-for-publishsubscribe.html">Implementing a publisher for Publish/Subscribe</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="implementing-a-subscriber-for-publishsubscribe.html">Implementing a subscriber for Publish/Subscribe</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Understanding and Implementing Message Oriented Middleware</span>
    <span class="version">1.0.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Understanding and Implementing Message Oriented Middleware</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Understanding and Implementing Message Oriented Middleware</a></li>
    <li><a href="hands-on-lab-implementing-messaging-patterns.html">Hands-on Lab: Implementing Messaging Patterns</a></li>
    <li><a href="setting-up-a-basic-message-broker.html">Setting up a basic message broker</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Setting up a basic message broker</h1>
<h1 id="_setting_up_a_basic_message_broker" class="sect0"><a class="anchor" href="#_setting_up_a_basic_message_broker"></a>Setting up a Basic Message Broker</h1>
<div class="paragraph">
<p>In distributed systems, the message broker acts as the central hub for message exchange, enabling seamless communication between disparate services. Before we dive into implementing specific messaging patterns like Point-to-Point or Publish/Subscribe, we need to establish this foundational component. This section will guide you through setting up a basic message broker, which will serve as the backbone for our subsequent hands-on activities.</p>
</div>
<div class="paragraph">
<p>A message broker is a specialized server that mediates communication by receiving, storing, and forwarding messages. It abstracts away the complexities of network communication, ensuring messages are reliably delivered to their intended recipients, even if those recipients are temporarily offline or if there are fluctuations in network availability.</p>
</div>
<div class="paragraph">
<p>For our hands-on lab, we will use <strong>RabbitMQ</strong> as our message broker. RabbitMQ is a popular open-source message broker that implements the Advanced Message Queuing Protocol (AMQP). It&#8217;s robust, widely used, and relatively straightforward to set up, especially using containerization technologies like Docker. Using Docker allows us to quickly deploy RabbitMQ in an isolated environment without interfering with your host system, making it an ideal choice for a lab environment.</p>
</div>
<div class="sect1">
<h2 id="_hands_on_lab_setting_up_rabbitmq_with_docker"><a class="anchor" href="#_hands_on_lab_setting_up_rabbitmq_with_docker"></a>Hands-on Lab: Setting up RabbitMQ with Docker</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This lab activity will walk you through the process of deploying a RabbitMQ instance using Docker. This setup will include the RabbitMQ server itself and its management plugin, which provides a user-friendly web interface for monitoring and managing the broker.</p>
</div>
<div class="sect2">
<h3 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h3>
<div class="paragraph">
<p>Before you begin, ensure you have the following installed on your system:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Docker Desktop (or Docker Engine):</strong> Docker is essential for running our RabbitMQ container. You can download and install it from the official Docker website (<a href="https://www.docker.com/products/docker-desktop" class="bare">https://www.docker.com/products/docker-desktop</a>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once Docker is installed, open your terminal or command prompt.</p>
</div>
</div>
<div class="sect2">
<h3 id="_activity_deploying_the_rabbitmq_message_broker"><a class="anchor" href="#_activity_deploying_the_rabbitmq_message_broker"></a>Activity: Deploying the RabbitMQ Message Broker</h3>
<div class="paragraph">
<p>Follow these steps to get your RabbitMQ message broker up and running.</p>
</div>
<div class="sect3">
<h4 id="_step_1_pull_the_rabbitmq_docker_image"><a class="anchor" href="#_step_1_pull_the_rabbitmq_docker_image"></a>Step 1: Pull the RabbitMQ Docker Image</h4>
<div class="paragraph">
<p>First, we need to download the official RabbitMQ Docker image. We&#8217;ll specifically pull the image that includes the management plugin, as this will provide a convenient web interface for inspection.</p>
</div>
<div class="listingblock">
<div class="title">Command to pull RabbitMQ image</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker pull rabbitmq:3-management</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command instructs Docker to fetch the <code>rabbitmq:3-management</code> image from Docker Hub. The <code>3-management</code> tag indicates RabbitMQ version 3, bundled with its web-based management plugin. This process might take a few moments depending on your internet connection.</p>
</div>
</div>
<div class="sect3">
<h4 id="_step_2_run_the_rabbitmq_docker_container"><a class="anchor" href="#_step_2_run_the_rabbitmq_docker_container"></a>Step 2: Run the RabbitMQ Docker Container</h4>
<div class="paragraph">
<p>After the image is downloaded, you can run a new container based on that image. We&#8217;ll configure port mappings to access the RabbitMQ core service and its management interface from your host machine.</p>
</div>
<div class="listingblock">
<div class="title">Command to run RabbitMQ container</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker run -d --hostname my-rabbit --name some-rabbit -p 5672:5672 -p 15672:15672 rabbitmq:3-management</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s break down this command:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>-d</code>: Runs the container in "detached" mode, meaning it runs in the background.</p>
</li>
<li>
<p><code>--hostname my-rabbit</code>: Sets the hostname inside the container to <code>my-rabbit</code>. This can be useful for internal network configuration within Docker.</p>
</li>
<li>
<p><code>--name some-rabbit</code>: Assigns a human-readable name <code>some-rabbit</code> to your container. This makes it easier to refer to the container later (e.g., when stopping or restarting).</p>
</li>
<li>
<p><code>-p 5672:5672</code>: Maps port <code>5672</code> on your host machine to port <code>5672</code> inside the container. Port <code>5672</code> is the default port for AMQP client connections to RabbitMQ.</p>
</li>
<li>
<p><code>-p 15672:15672</code>: Maps port <code>15672</code> on your host machine to port <code>15672</code> inside the container. Port <code>15672</code> is the default port for the RabbitMQ Management UI.</p>
</li>
<li>
<p><code>rabbitmq:3-management</code>: Specifies the Docker image to use for creating the container.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Upon successful execution, Docker will output a long string, which is the container ID, confirming that your RabbitMQ container has started.</p>
</div>
<div class="paragraph">
<div class="title">Tip</div>
<p>By default, RabbitMQ&#8217;s management UI uses <code>guest</code> as both the username and password. This is convenient for development and lab environments but should <strong>never</strong> be used in production for security reasons.</p>
</div>
</div>
<div class="sect3">
<h4 id="_step_3_verify_the_rabbitmq_setup"><a class="anchor" href="#_step_3_verify_the_rabbitmq_setup"></a>Step 3: Verify the RabbitMQ Setup</h4>
<div class="paragraph">
<p>To ensure your RabbitMQ broker is running correctly, you can perform two quick checks:</p>
</div>
<div class="sect4">
<h5 id="_check_3_1_verify_docker_container_status"><a class="anchor" href="#_check_3_1_verify_docker_container_status"></a>Check 3.1: Verify Docker Container Status</h5>
<div class="paragraph">
<p>You can check if your Docker container is running using the <code>docker ps</code> command:</p>
</div>
<div class="listingblock">
<div class="title">Command to list running containers</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker ps</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see an entry for <code>some-rabbit</code> (or whatever name you gave it) with <code>rabbitmq:3-management</code> as its image, and its status should be <code>Up &#8230;&#8203;</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_check_3_2_access_the_rabbitmq_management_ui"><a class="anchor" href="#_check_3_2_access_the_rabbitmq_management_ui"></a>Check 3.2: Access the RabbitMQ Management UI</h5>
<div class="paragraph">
<p>Open your web browser and navigate to <code><a href="http://localhost:15672" class="bare">http://localhost:15672</a></code>.</p>
</div>
<div class="paragraph">
<p>You should be greeted by the RabbitMQ Management login page. Enter <code>guest</code> for both the username and password.</p>
</div>
<div class="imageblock unresolved">
<div class="content">
<img src="./images/rabbitmq-login.png" alt="RabbitMQ Management Login" width="500">
</div>
</div>
<div class="paragraph">
<p>After logging in, you will see the RabbitMQ Management Dashboard, which displays an overview of your broker&#8217;s status, queues, channels, and connections. This dashboard is an invaluable tool for observing message flow and troubleshooting.</p>
</div>
<div class="imageblock unresolved">
<div class="content">
<img src="./images/rabbitmq-dashboard.png" alt="RabbitMQ Management Dashboard" width="800">
</div>
</div>
<div class="paragraph">
<p>Congratulations! You have successfully set up a basic RabbitMQ message broker. This instance is now ready to receive messages from producers and deliver them to consumers, which we will explore in the upcoming lab activities.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you encounter issues accessing <code>localhost:15672</code>, ensure no other service on your host machine is already using port <code>15672</code>. You can try re-running the <code>docker run</code> command with a different host port (e.g., <code>-p 15673:15672</code>) if a conflict exists. Also, ensure your Docker Desktop application is fully running and healthy.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="hands-on-lab-implementing-messaging-patterns.html">Hands-on Lab: Implementing Messaging Patterns</a></span>
  <span class="next"><a href="developing-a-producer-for-point-to-point-messaging.html">Developing a producer for Point-to-Point messaging</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
