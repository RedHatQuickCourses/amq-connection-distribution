<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Implementing message producers in Spring Boot :: Understanding and Implementing Message Oriented Middleware</title>
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Understanding and Implementing Message Oriented Middleware</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="amq-connection-distribution" data-version="1.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Understanding and Implementing Message Oriented Middleware</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../introduction-to-message-oriented-middleware-mom/introduction-to-message-oriented-middleware-mom.html">Introduction to Message Oriented Middleware (MOM)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-message-oriented-middleware-mom/what-is-message-oriented-middleware.html">What is Message Oriented Middleware?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-message-oriented-middleware-mom/core-concepts-messages-producers-consumers-brokers.html">Core concepts: Messages, Producers, Consumers, Brokers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-message-oriented-middleware-mom/benefits-of-mom-in-distributed-systems.html">Benefits of MOM in distributed systems</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-message-oriented-middleware-mom/common-use-cases-for-mom.html">Common use cases for MOM</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../challenges-in-distributed-systems/challenges-in-distributed-systems.html">Challenges in Distributed Systems</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../challenges-in-distributed-systems/issues-with-direct-service-to-service-communication.html">Issues with direct service-to-service communication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../challenges-in-distributed-systems/the-need-for-asynchronous-processing.html">The need for asynchronous processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../challenges-in-distributed-systems/problems-with-reliability-and-data-consistency.html">Problems with reliability and data consistency</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../challenges-in-distributed-systems/scalability-and-coupling-concerns.html">Scalability and coupling concerns</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/mom-solutions-for-distributed-systems.html">MOM Solutions for Distributed Systems</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/decoupling-services-with-message-queues.html">Decoupling services with message queues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/point-to-point-ptp-messaging-model.html">Point-to-Point (PTP) messaging model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/publishsubscribe-pubsub-messaging-model.html">Publish/Subscribe (Pub/Sub) messaging model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/ensuring-message-delivery-and-reliability.html">Ensuring message delivery and reliability</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/message-persistence-and-durability.html">Message persistence and durability</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../hands-on-lab-implementing-messaging-patterns/hands-on-lab-implementing-messaging-patterns.html">Hands-on Lab: Implementing Messaging Patterns</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-implementing-messaging-patterns/setting-up-a-basic-message-broker.html">Setting up a basic message broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-implementing-messaging-patterns/developing-a-producer-for-point-to-point-messaging.html">Developing a producer for Point-to-Point messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-implementing-messaging-patterns/developing-a-consumer-for-point-to-point-messaging.html">Developing a consumer for Point-to-Point messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-implementing-messaging-patterns/implementing-a-publisher-for-publishsubscribe.html">Implementing a publisher for Publish/Subscribe</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-implementing-messaging-patterns/implementing-a-subscriber-for-publishsubscribe.html">Implementing a subscriber for Publish/Subscribe</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Understanding and Implementing Message Oriented Middleware</span>
    <span class="version">1.0.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Understanding and Implementing Message Oriented Middleware</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Understanding and Implementing Message Oriented Middleware</a></li>
    <li><a href="implementing-message-producers-in-spring-boot.html">Implementing message producers in Spring Boot</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Implementing message producers in Spring Boot</h1>
<h1 id="_implementing_message_producers_in_spring_boot" class="sect0"><a class="anchor" href="#_implementing_message_producers_in_spring_boot"></a>Implementing Message Producers in Spring Boot</h1>
<div class="paragraph">
<p>Spring Boot provides robust integration with Java Message Service (JMS) brokers like ActiveMQ Artemis, simplifying the development of message-driven applications. Implementing a message producer involves configuring the connection to the broker and using Spring&#8217;s <code>JmsTemplate</code> to send messages to a specified destination (queue or topic).</p>
</div>
<div class="sect2">
<h3 id="_understanding_message_producers_in_spring_boot"><a class="anchor" href="#_understanding_message_producers_in_spring_boot"></a>Understanding Message Producers in Spring Boot</h3>
<div class="paragraph">
<p>A message producer in a messaging system is responsible for creating and sending messages to a destination, from where they can be consumed by other applications. In Spring Boot, the <code>JmsTemplate</code> class is the central component for synchronous JMS operations, abstracting away the complexities of the JMS API.</p>
</div>
<div class="paragraph">
<p>When implementing a message producer with ActiveMQ Artemis in Spring Boot, you&#8217;ll typically:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Configure the connection properties for ActiveMQ Artemis.</p>
</li>
<li>
<p>Inject <code>JmsTemplate</code> into your service or component.</p>
</li>
<li>
<p>Use methods provided by <code>JmsTemplate</code> to send messages to a queue or topic.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_key_components_for_message_production"><a class="anchor" href="#_key_components_for_message_production"></a>Key Components for Message Production</h3>
<div class="sect3">
<h4 id="_jmstemplate"><a class="anchor" href="#_jmstemplate"></a>JmsTemplate</h4>
<div class="paragraph">
<p><code>JmsTemplate</code> handles the creation and release of JMS resources (connections, sessions, producers). It provides a variety of <code>send</code> and <code>convertAndSend</code> methods to accommodate different messaging scenarios.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>send(String destinationName, MessageCreator messageCreator)</code>: Allows you to create the JMS <code>Message</code> object manually using a <code>MessageCreator</code> callback. This provides fine-grained control over message properties and headers.</p>
</li>
<li>
<p><code>convertAndSend(String destinationName, Object message)</code>: This is the most common and convenient method. It takes a Java object, converts it into a JMS <code>Message</code> (e.g., a <code>TextMessage</code> for <code>String</code>, <code>ObjectMessage</code> for serializable objects), and sends it to the specified destination.</p>
</li>
<li>
<p><code>convertAndSend(Destination destination, Object message)</code>: Similar to the above, but takes a <code>javax.jms.Destination</code> object directly.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_destinations_queues_and_topics"><a class="anchor" href="#_destinations_queues_and_topics"></a>Destinations (Queues and Topics)</h4>
<div class="paragraph">
<p>Messages are sent to destinations, which can be either <strong>queues</strong> or <strong>topics</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Queues (Point-to-Point)</strong>: Messages are delivered to only one consumer among potentially many. Ideal for task distribution and workload balancing.</p>
</li>
<li>
<p><strong>Topics (Publish/Subscribe)</strong>: Messages are broadcast to all active subscribers. Ideal for event notification and broadcasting information.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You specify the destination name (e.g., "myQueue", "myTopic") when using <code>JmsTemplate</code>. Spring Boot&#8217;s auto-configuration will recognize these names and interact with Artemis appropriately.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hands_on_activity_developing_a_simple_spring_boot_message_producer"><a class="anchor" href="#_hands_on_activity_developing_a_simple_spring_boot_message_producer"></a>Hands-on Activity: Developing a Simple Spring Boot Message Producer</h3>
<div class="paragraph">
<p>Let&#8217;s create a Spring Boot application that acts as a message producer, sending simple text messages to an ActiveMQ Artemis queue.</p>
</div>
<div class="sect3">
<h4 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h4>
<div class="ulist">
<ul>
<li>
<p>A running ActiveMQ Artemis instance or cluster (e.g., deployed on OpenShift as per previous labs).</p>
</li>
<li>
<p>Maven or Gradle installed.</p>
</li>
<li>
<p>Java Development Kit (JDK) 11 or newer.</p>
</li>
<li>
<p>An IDE like IntelliJ IDEA or VS Code.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_step_1_create_a_spring_boot_project"><a class="anchor" href="#_step_1_create_a_spring_boot_project"></a>Step 1: Create a Spring Boot Project</h4>
<div class="paragraph">
<p>Generate a new Spring Boot project using Spring Initializr (<a href="https://start.spring.io/" class="bare">https://start.spring.io/</a>) with the following dependencies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Spring Web</code> (optional, for a REST endpoint to trigger message sending)</p>
</li>
<li>
<p><code>Spring for Apache ActiveMQ 5</code> (this is the Spring Boot starter for JMS)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Alternatively, add these to your <code>pom.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;3.2.5&lt;/version&gt; &lt;!-- Use a recent Spring Boot version --&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
    &lt;groupId&gt;com.example&lt;/groupId&gt;
    &lt;artifactId&gt;artemis-producer&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;artemis-producer&lt;/name&gt;
    &lt;description&gt;Demo project for ActiveMQ Artemis Producer&lt;/description&gt;

    &lt;properties&gt;
        &lt;java.version&gt;17&lt;/java.version&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-activemq&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

&lt;/project&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_step_2_configure_activemq_artemis_connection"><a class="anchor" href="#_step_2_configure_activemq_artemis_connection"></a>Step 2: Configure ActiveMQ Artemis Connection</h4>
<div class="paragraph">
<p>Open <code>src/main/resources/application.properties</code> (or <code>application.yml</code>) and add the connection details for your ActiveMQ Artemis instance.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># ActiveMQ Artemis Broker Configuration
spring.activemq.broker-url=tcp://localhost:61616  <i class="conum" data-value="1"></i><b>(1)</b>
spring.activemq.user=admin                          <i class="conum" data-value="2"></i><b>(2)</b>
spring.activemq.password=admin                      <i class="conum" data-value="3"></i><b>(3)</b>

# Enable JMS transactional support if needed (false by default)
# spring.jms.pub-sub-domain=false // Set to true for topics, false for queues (default)</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Replace <code>localhost:61616</code> with the actual hostname/IP and port of your Artemis broker. If running on OpenShift, this would be the service URL (e.g., <code>amqp://artemis-broker-service.my-namespace.svc.cluster.local:61616</code>).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Use the appropriate username for your Artemis broker.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Use the appropriate password for your Artemis broker.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_step_3_create_the_message_producer_service"><a class="anchor" href="#_step_3_create_the_message_producer_service"></a>Step 3: Create the Message Producer Service</h4>
<div class="paragraph">
<p>Create a Java class <code>JmsProducer.java</code> that will contain the logic for sending messages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.example.artemisproducer;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jms.core.JmsTemplate;
import org.springframework.stereotype.Service;

@Service <i class="conum" data-value="1"></i><b>(1)</b>
public class JmsProducer {

    private static final Logger log = LoggerFactory.getLogger(JmsProducer.class);

    private final JmsTemplate jmsTemplate; <i class="conum" data-value="2"></i><b>(2)</b>

    @Autowired <i class="conum" data-value="3"></i><b>(3)</b>
    public JmsProducer(JmsTemplate jmsTemplate) {
        this.jmsTemplate = jmsTemplate;
    }

    public void sendMessage(String destination, String message) {
        log.info("Sending message '{}' to destination '{}'", message, destination);
        jmsTemplate.convertAndSend(destination, message); <i class="conum" data-value="4"></i><b>(4)</b>
    }

    public void sendMessageWithCustomCreator(String destination, String messageBody, String customProperty) {
        log.info("Sending message with custom properties '{}' to destination '{}'", messageBody, destination);
        jmsTemplate.send(destination, session -&gt; { <i class="conum" data-value="5"></i><b>(5)</b>
            javax.jms.TextMessage message = session.createTextMessage(messageBody);
            message.setStringProperty("customHeader", customProperty); <i class="conum" data-value="6"></i><b>(6)</b>
            return message;
        });
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>@Service</code> marks this class as a Spring service component.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>JmsTemplate</code> is injected. Spring Boot&#8217;s auto-configuration will create and configure a <code>JmsTemplate</code> instance based on <code>application.properties</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Constructor injection is used for <code>JmsTemplate</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>convertAndSend</code> method is used to send a simple <code>String</code> message. Spring converts it to a <code>TextMessage</code> automatically.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The <code>send</code> method with a <code>MessageCreator</code> allows for more control, letting you define the <code>Message</code> object and its properties explicitly.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Here, a custom header <code>customHeader</code> is added to the JMS message.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_step_4_create_a_rest_controller_to_trigger_message_sending_optional_but_convenient_for_testing"><a class="anchor" href="#_step_4_create_a_rest_controller_to_trigger_message_sending_optional_but_convenient_for_testing"></a>Step 4: Create a REST Controller to Trigger Message Sending (Optional but convenient for testing)</h4>
<div class="paragraph">
<p>Create a Java class <code>MessageController.java</code> to expose a REST endpoint to send messages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.example.artemisproducer;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@RestController <i class="conum" data-value="1"></i><b>(1)</b>
public class MessageController {

    private final JmsProducer jmsProducer;

    @Autowired
    public MessageController(JmsProducer jmsProducer) {
        this.jmsProducer = jmsProducer;
    }

    @PostMapping("/send") <i class="conum" data-value="2"></i><b>(2)</b>
    public String send(@RequestParam String destination, @RequestParam String message) {
        jmsProducer.sendMessage(destination, message);
        return "Message sent successfully to " + destination;
    }

    @PostMapping("/send-custom") <i class="conum" data-value="3"></i><b>(3)</b>
    public String sendWithCustom(@RequestParam String destination, @RequestParam String message, @RequestParam String property) {
        jmsProducer.sendMessageWithCustomCreator(destination, message, property);
        return "Message with custom property sent successfully to " + destination;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>@RestController</code> combines <code>@Controller</code> and <code>@ResponseBody</code>, making it easy to create RESTful web services.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A POST endpoint <code>/send</code> to send basic messages.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>A POST endpoint <code>/send-custom</code> to demonstrate sending messages with custom properties.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_step_5_run_the_application"><a class="anchor" href="#_step_5_run_the_application"></a>Step 5: Run the Application</h4>
<div class="paragraph">
<p>Navigate to the root of your project in a terminal and run the Spring Boot application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw spring-boot:run</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see logs indicating that the application has started and connected to ActiveMQ Artemis.</p>
</div>
</div>
<div class="sect3">
<h4 id="_step_6_test_the_producer"><a class="anchor" href="#_step_6_test_the_producer"></a>Step 6: Test the Producer</h4>
<div class="paragraph">
<p>Use <code>curl</code> or a tool like Postman to send messages:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Send a simple message</strong>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X POST "http://localhost:8080/send?destination=myQueue&amp;message=HelloFromSpringBootProducer"</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will send "HelloFromSpringBootProducer" to a queue named <code>myQueue</code>.</p>
</div>
</li>
<li>
<p><strong>Send a message with a custom property</strong>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X POST "http://localhost:8080/send-custom?destination=myQueue&amp;message=MessageWithProps&amp;property=Value123"</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will send "MessageWithProps" to <code>myQueue</code> and include a JMS property <code>customHeader</code> with the value <code>Value123</code>.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can verify these messages by checking the ActiveMQ Artemis web console or by having a consumer application subscribed to <code>myQueue</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_expert_level_insights_and_troubleshooting"><a class="anchor" href="#_expert_level_insights_and_troubleshooting"></a>Expert-Level Insights and Troubleshooting</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Connection Pooling</strong>: Spring Boot auto-configures a <code>CachingConnectionFactory</code> by default, which wraps the standard JMS <code>ConnectionFactory</code> to cache <code>Connection</code>, <code>Session</code>, and <code>MessageProducer</code> instances. This significantly improves performance by reducing the overhead of creating new JMS resources for each message.</p>
</li>
<li>
<p><strong>Transactions</strong>: For reliable messaging, especially when combining JMS operations with database transactions, you can enable JTA (Java Transaction API) and use <code>@Transactional</code> annotations. Spring will automatically enlist the JMS operations in the current transaction.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// In your producer service
import jakarta.transaction.Transactional; // or org.springframework.transaction.annotation.Transactional

@Service
public class JmsTransactionalProducer {

    @Autowired
    private JmsTemplate jmsTemplate;

    @Transactional
    public void sendTransactionalMessage(String destination, String messageContent) {
        // Perform some database operation (e.g., save to DB)
        // ...
        jmsTemplate.convertAndSend(destination, messageContent);
        // If an exception occurs here or in the DB operation,
        // both the DB transaction and the JMS message send will be rolled back.
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p><strong>Error Handling</strong>: <code>JmsTemplate</code> methods can throw <code>JmsException</code> (a runtime exception) if an issue occurs during message sending. It&#8217;s good practice to wrap <code>JmsTemplate</code> calls in <code>try-catch</code> blocks for specific error handling, logging, or retry mechanisms.</p>
</li>
<li>
<p><strong>Custom Message Converters</strong>: For sending complex Java objects, you might need to configure a custom <code>MessageConverter</code>. By default, <code>JmsTemplate</code> uses <code>SimpleMessageConverter</code> which handles <code>String</code>, <code>Map</code>, <code>byte[]</code>, and <code>Serializable</code> objects. For example, to send JSON payloads, you could use <code>MappingJackson2MessageConverter</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// Example: Configuring a custom MessageConverter for JSON
@Configuration
public class JmsConfig {

    @Bean
    public MessageConverter jacksonJmsMessageConverter() {
        MappingJackson2MessageConverter converter = new MappingJackson2MessageConverter();
        converter.setTargetType(MessageType.TEXT); // Send as TextMessage
        converter.setTypeIdPropertyName("_type"); // Add a type header for deserialization
        return converter;
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p><strong>Asynchronous Sending</strong>: While <code>JmsTemplate</code> is synchronous, you can combine it with Spring&#8217;s <code>@Async</code> annotation on your producer service methods to make the sending operation non-blocking for the caller. Ensure you have <code>@EnableAsync</code> on your main application class or a configuration class.</p>
</li>
<li>
<p><strong>Security</strong>: For production environments, ensure that your ActiveMQ Artemis instance is secured with proper authentication and authorization. The <code>spring.activemq.user</code> and <code>spring.activemq.password</code> properties should use strong credentials, and ideally, retrieved from a secure secret management system rather than hardcoded.</p>
</li>
<li>
<p><strong>Payload Size</strong>: Be mindful of the message payload size. Extremely large messages can impact performance and memory usage on both the broker and client sides. For very large data, consider storing the data in an external system (e.g., S3, database) and sending only a reference (e.g., an ID) through the message queue.</p>
</li>
</ul>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
