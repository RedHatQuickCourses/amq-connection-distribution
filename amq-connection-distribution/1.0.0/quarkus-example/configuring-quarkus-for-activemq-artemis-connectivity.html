<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configuring Quarkus for ActiveMQ Artemis connectivity :: Understanding and Implementing Message Oriented Middleware</title>
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Understanding and Implementing Message Oriented Middleware</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="amq-connection-distribution" data-version="1.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Understanding and Implementing Message Oriented Middleware</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../introduction-to-message-oriented-middleware-mom/introduction-to-message-oriented-middleware-mom.html">Introduction to Message Oriented Middleware (MOM)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-message-oriented-middleware-mom/what-is-message-oriented-middleware.html">What is Message Oriented Middleware?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-message-oriented-middleware-mom/core-concepts-messages-producers-consumers-brokers.html">Core concepts: Messages, Producers, Consumers, Brokers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-message-oriented-middleware-mom/benefits-of-mom-in-distributed-systems.html">Benefits of MOM in distributed systems</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-message-oriented-middleware-mom/common-use-cases-for-mom.html">Common use cases for MOM</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../challenges-in-distributed-systems/challenges-in-distributed-systems.html">Challenges in Distributed Systems</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../challenges-in-distributed-systems/issues-with-direct-service-to-service-communication.html">Issues with direct service-to-service communication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../challenges-in-distributed-systems/the-need-for-asynchronous-processing.html">The need for asynchronous processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../challenges-in-distributed-systems/problems-with-reliability-and-data-consistency.html">Problems with reliability and data consistency</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../challenges-in-distributed-systems/scalability-and-coupling-concerns.html">Scalability and coupling concerns</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/mom-solutions-for-distributed-systems.html">MOM Solutions for Distributed Systems</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/decoupling-services-with-message-queues.html">Decoupling services with message queues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/point-to-point-ptp-messaging-model.html">Point-to-Point (PTP) messaging model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/publishsubscribe-pubsub-messaging-model.html">Publish/Subscribe (Pub/Sub) messaging model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/ensuring-message-delivery-and-reliability.html">Ensuring message delivery and reliability</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mom-solutions-for-distributed-systems/message-persistence-and-durability.html">Message persistence and durability</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../hands-on-lab-implementing-messaging-patterns/hands-on-lab-implementing-messaging-patterns.html">Hands-on Lab: Implementing Messaging Patterns</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-implementing-messaging-patterns/setting-up-a-basic-message-broker.html">Setting up a basic message broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-implementing-messaging-patterns/developing-a-producer-for-point-to-point-messaging.html">Developing a producer for Point-to-Point messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-implementing-messaging-patterns/developing-a-consumer-for-point-to-point-messaging.html">Developing a consumer for Point-to-Point messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-implementing-messaging-patterns/implementing-a-publisher-for-publishsubscribe.html">Implementing a publisher for Publish/Subscribe</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-implementing-messaging-patterns/implementing-a-subscriber-for-publishsubscribe.html">Implementing a subscriber for Publish/Subscribe</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Understanding and Implementing Message Oriented Middleware</span>
    <span class="version">1.0.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Understanding and Implementing Message Oriented Middleware</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Understanding and Implementing Message Oriented Middleware</a></li>
    <li><a href="configuring-quarkus-for-activemq-artemis-connectivity.html">Configuring Quarkus for ActiveMQ Artemis connectivity</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Configuring Quarkus for ActiveMQ Artemis connectivity</h1>
<h1 id="_configuring_quarkus_for_activemq_artemis_connectivity" class="sect0"><a class="anchor" href="#_configuring_quarkus_for_activemq_artemis_connectivity"></a>Configuring Quarkus for ActiveMQ Artemis Connectivity</h1>
<div class="paragraph">
<p>This section details how to configure Quarkus applications to connect to an ActiveMQ Artemis broker, laying the groundwork for developing resilient messaging applications. Quarkus, with its rapid startup time and low memory footprint, combined with ActiveMQ Artemis&#8217;s robust messaging capabilities, provides an excellent platform for building cloud-native microservices.</p>
</div>
<div class="sect1">
<h2 id="_understanding_quarkus_messaging_integrations"><a class="anchor" href="#_understanding_quarkus_messaging_integrations"></a>Understanding Quarkus Messaging Integrations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus offers flexible options for integrating with messaging brokers:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>JMS (Jakarta Messaging Service)</strong>: A standard Java API for enterprise messaging, providing a robust, transaction-aware interface for producers and consumers.</p>
</li>
<li>
<p><strong>Eclipse MicroProfile Reactive Messaging</strong>: A specification that simplifies event-driven microservices development by integrating with various messaging technologies in a reactive, non-blocking manner. Quarkus provides excellent support for this.</p>
</li>
<li>
<p><strong>AMQP (Advanced Message Queuing Protocol)</strong>: While JMS is an API, AMQP is a wire protocol. Quarkus can interact with Artemis over AMQP, often through a client that implements the JMS API or directly using AMQP client libraries.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This guide focuses on configuring the underlying connection details that are typically used by both JMS and Reactive Messaging extensions in Quarkus.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_core_dependencies"><a class="anchor" href="#_core_dependencies"></a>Core Dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To enable ActiveMQ Artemis connectivity in your Quarkus application, you typically need to add the appropriate Maven or Gradle dependency. For standard JMS integration with ActiveMQ Artemis, the <code>quarkus-artemis-jms</code> extension is the most straightforward choice.</p>
</div>
<div class="listingblock">
<div class="title">Maven Dependency (pom.xml)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-artemis-jms&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This dependency brings in the necessary ActiveMQ Artemis client libraries and integrates them with the Quarkus build and runtime environment, including auto-configuration capabilities.</p>
</div>
<div class="paragraph">
<p>For Reactive Messaging with AMQP, you would typically use <code>quarkus-smallrye-reactive-messaging-amqp</code>:</p>
</div>
<div class="listingblock">
<div class="title">Maven Dependency (pom.xml) for Reactive Messaging AMQP</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-smallrye-reactive-messaging-amqp&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This module leverages the AMQP 1.0 protocol and integrates seamlessly with the SmallRye Reactive Messaging framework provided by Quarkus. While <code>quarkus-artemis-jms</code> provides a JMS-compliant client, <code>quarkus-smallrye-reactive-messaging-amqp</code> provides a reactive, non-blocking client that communicates directly over AMQP. For basic connection, the configuration discussed below applies to both, though specific messaging patterns will differ.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_activemq_artemis_connectivity"><a class="anchor" href="#_configuring_activemq_artemis_connectivity"></a>Configuring ActiveMQ Artemis Connectivity</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus applications are configured primarily through the <code>src/main/resources/application.properties</code> file. For ActiveMQ Artemis, you&#8217;ll specify connection details and client-side behavior.</p>
</div>
<div class="sect2">
<h3 id="_essential_connection_properties"><a class="anchor" href="#_essential_connection_properties"></a>Essential Connection Properties</h3>
<div class="paragraph">
<p>The most critical properties define how your Quarkus application locates and connects to the Artemis broker.</p>
</div>
<div class="listingblock">
<div class="title">Example <code>application.properties</code> for Artemis JMS</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># Basic connection to ActiveMQ Artemis
quarkus.artemis.url=tcp://localhost:61616
quarkus.artemis.username=artemis
quarkus.artemis.password=artemis

# Optional: Configure a client ID for durable subscriptions
quarkus.artemis.client-id=my-quarkus-app-client

# Optional: Connection pooling settings
quarkus.artemis.pool.enabled=true
quarkus.artemis.pool.max-pool-size=10
quarkus.artemis.pool.min-pool-size=2
quarkus.artemis.pool.initial-pool-size=5</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s break down these properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>quarkus.artemis.url</code>:</p>
</li>
<li>
<p><strong>Purpose</strong>: Specifies the URL for connecting to the ActiveMQ Artemis broker. This can be a single broker or a comma-separated list of URLs for failover scenarios.</p>
</li>
<li>
<p><strong>Format</strong>: <code>tcp://host:port</code> or <code>tcp://host1:port1,tcp://host2:port2</code> for failover. For SSL/TLS, use <code>ssl://host:port</code>.</p>
</li>
<li>
<p><strong>Example</strong>: <code>tcp://artemis-broker-0.artemis-cluster.svc.cluster.local:61616</code> (OpenShift internal service).</p>
</li>
<li>
<p><code>quarkus.artemis.username</code>:</p>
</li>
<li>
<p><strong>Purpose</strong>: The username required for authentication with the Artemis broker.</p>
</li>
<li>
<p><strong>Security Note</strong>: In production environments, sensitive information like passwords should be injected via environment variables or a secret management system, not hardcoded.</p>
</li>
<li>
<p><code>quarkus.artemis.password</code>:</p>
</li>
<li>
<p><strong>Purpose</strong>: The password for authentication.</p>
</li>
<li>
<p><strong>Security Note</strong>: As with the username, avoid hardcoding in production.</p>
</li>
<li>
<p><code>quarkus.artemis.client-id</code>:</p>
</li>
<li>
<p><strong>Purpose</strong>: An optional, unique identifier for the client connection. This is crucial for <strong>durable subscriptions</strong> in JMS, where the broker needs to identify a specific client to store messages when it&#8217;s offline. If not set, a unique ID will be generated, but this is problematic for durable subscriptions that rely on a consistent client ID.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_connection_pooling_configuration"><a class="anchor" href="#_connection_pooling_configuration"></a>Connection Pooling Configuration</h3>
<div class="paragraph">
<p>For robust and performant applications, especially microservices handling frequent messaging, connection pooling is essential. Quarkus&#8217;s Artemis extension provides configuration for the underlying connection pool.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>quarkus.artemis.pool.enabled</code>:</p>
</li>
<li>
<p><strong>Purpose</strong>: Enables or disables connection pooling. It&#8217;s highly recommended to enable this for production.</p>
</li>
<li>
<p><strong>Default</strong>: <code>false</code>.</p>
</li>
<li>
<p><code>quarkus.artemis.pool.max-pool-size</code>:</p>
</li>
<li>
<p><strong>Purpose</strong>: The maximum number of pooled connections. This limits the number of concurrent connections your application will maintain to the broker.</p>
</li>
<li>
<p><strong>Default</strong>: <code>10</code>.</p>
</li>
<li>
<p><code>quarkus.artemis.pool.min-pool-size</code>:</p>
</li>
<li>
<p><strong>Purpose</strong>: The minimum number of idle connections that the pool tries to maintain. Connections beyond this number might be closed if idle for too long.</p>
</li>
<li>
<p><strong>Default</strong>: <code>1</code>.</p>
</li>
<li>
<p><code>quarkus.artemis.pool.initial-pool-size</code>:</p>
</li>
<li>
<p><strong>Purpose</strong>: The number of connections to create when the pool is initialized. This helps avoid latency spikes during the first few connection requests.</p>
</li>
<li>
<p><strong>Default</strong>: <code>1</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ssltls_configuration"><a class="anchor" href="#_ssltls_configuration"></a>SSL/TLS Configuration</h3>
<div class="paragraph">
<p>Securing communication with the Artemis broker is paramount, especially over public networks or within shared clusters. Quarkus allows configuring SSL/TLS for Artemis connections.</p>
</div>
<div class="listingblock">
<div class="title">Example <code>application.properties</code> for SSL/TLS</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># SSL/TLS connection to ActiveMQ Artemis
quarkus.artemis.url=ssl://artemis-broker.example.com:61617
quarkus.artemis.ssl.trust-store=classpath:client-truststore.jks
quarkus.artemis.ssl.trust-store-password=truststorepass
quarkus.artemis.ssl.key-store=classpath:client-keystore.jks
quarkus.artemis.ssl.key-store-password=keystorepass
quarkus.artemis.ssl.enabled-cipher-suites=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
quarkus.artemis.ssl.enabled-protocols=TLSv1.2,TLSv1.3</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>quarkus.artemis.ssl.trust-store</code>:</p>
</li>
<li>
<p><strong>Purpose</strong>: Path to the client&#8217;s trust store, containing the trusted certificates (e.g., the CA certificate that signed the broker&#8217;s certificate).</p>
</li>
<li>
<p><strong>Format</strong>: Can be a path on the filesystem or <code>classpath:</code> prefix for a resource within the JAR.</p>
</li>
<li>
<p><code>quarkus.artemis.ssl.trust-store-password</code>:</p>
</li>
<li>
<p><strong>Purpose</strong>: Password for the client trust store.</p>
</li>
<li>
<p><code>quarkus.artemis.ssl.key-store</code>:</p>
</li>
<li>
<p><strong>Purpose</strong>: Path to the client&#8217;s key store, containing the client&#8217;s certificate and private key for two-way (mutual) TLS authentication.</p>
</li>
<li>
<p><strong>Note</strong>: Only required if the Artemis broker is configured for mutual TLS.</p>
</li>
<li>
<p><code>quarkus.artemis.ssl.key-store-password</code>:</p>
</li>
<li>
<p><strong>Purpose</strong>: Password for the client key store.</p>
</li>
<li>
<p><code>quarkus.artemis.ssl.enabled-cipher-suites</code>:</p>
</li>
<li>
<p><strong>Purpose</strong>: Comma-separated list of enabled cipher suites. This enhances security by restricting communication to strong cryptographic algorithms.</p>
</li>
<li>
<p><code>quarkus.artemis.ssl.enabled-protocols</code>:</p>
</li>
<li>
<p><strong>Purpose</strong>: Comma-separated list of enabled SSL/TLS protocols (e.g., <code>TLSv1.2</code>, <code>TLSv1.3</code>).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_multiple_connection_factories"><a class="anchor" href="#_multiple_connection_factories"></a>Multiple Connection Factories</h3>
<div class="paragraph">
<p>For more advanced scenarios, such as connecting to multiple Artemis brokers or using different authentication/pooling settings for different parts of your application, Quarkus allows configuring named connection factories.</p>
</div>
<div class="listingblock">
<div class="title">Example <code>application.properties</code> for Multiple Connection Factories</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># Default connection factory (used by @Inject ConnectionFactory)
quarkus.artemis.url=tcp://localhost:61616
quarkus.artemis.username=defaultUser
quarkus.artemis.password=defaultPass

# Named connection factory 'my-secondary-broker'
quarkus.artemis."my-secondary-broker".url=tcp://secondary-broker:61616
quarkus.artemis."my-secondary-broker".username=secondaryUser
quarkus.artemis."my-secondary-broker".password=secondaryPass
quarkus.artemis."my-secondary-broker".pool.max-pool-size=5</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use a named connection factory in your code, you would inject it using the <code>@jakarta.inject.Named</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import jakarta.inject.Inject;
import jakarta.inject.Named;
import jakarta.jms.ConnectionFactory;

// ...

@Inject
@Named("my-secondary-broker") // Inject the specific named connection factory
ConnectionFactory secondaryConnectionFactory;

@Inject // This will inject the default connection factory
ConnectionFactory defaultConnectionFactory;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reactive_messaging_amqp_specifics"><a class="anchor" href="#_reactive_messaging_amqp_specifics"></a>Reactive Messaging AMQP Specifics</h3>
<div class="paragraph">
<p>When using <code>quarkus-smallrye-reactive-messaging-amqp</code>, the configuration is slightly different, though it often overlaps for basic connection. The prefix changes to <code>mp.messaging.connector.amqp-external.</code> where <code>amqp-external</code> is the name of your connector (can be <code>amqp</code> or any custom name).</p>
</div>
<div class="listingblock">
<div class="title">Example <code>application.properties</code> for Reactive Messaging AMQP</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># Reactive Messaging AMQP connection
mp.messaging.connector.my-amqp-connector.url=amqp://localhost:5672
mp.messaging.connector.my-amqp-connector.username=artemis
mp.messaging.connector.my-amqp-connector.password=artemis
mp.messaging.connector.my-amqp-connector.ssl=false # Set to true for SSL/TLS</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>mp.messaging.connector.&lt;connector_name&gt;.url</code>:</p>
</li>
<li>
<p><strong>Purpose</strong>: The URL for the AMQP broker. The default AMQP port for Artemis is 5672.</p>
</li>
<li>
<p><strong>Format</strong>: <code>amqp://host:port</code> or <code>amqps://host:port</code> for SSL/TLS.</p>
</li>
<li>
<p><code>mp.messaging.connector.&lt;connector_name&gt;.username</code></p>
</li>
<li>
<p><code>mp.messaging.connector.&lt;connector_name&gt;.password</code></p>
</li>
<li>
<p><strong>Purpose</strong>: Authentication credentials for the AMQP broker.</p>
</li>
<li>
<p><code>mp.messaging.connector.&lt;connector_name&gt;.ssl</code>:</p>
</li>
<li>
<p><strong>Purpose</strong>: Boolean to enable SSL/TLS for the AMQP connection. Further SSL configuration (trust stores, key stores) can be done with additional <code>mp.messaging.connector.&lt;connector_name&gt;.trust-store.path</code>, etc. properties.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_hands_on_activity_basic_quarkus_artemis_configuration"><a class="anchor" href="#_hands_on_activity_basic_quarkus_artemis_configuration"></a>Hands-on Activity: Basic Quarkus Artemis Configuration</h3>
<div class="paragraph">
<p>Let&#8217;s set up a basic Quarkus project and configure it to connect to a local ActiveMQ Artemis instance.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>JDK 17+ installed</p>
</li>
<li>
<p>Maven 3.8.2+ installed</p>
</li>
<li>
<p>ActiveMQ Artemis running locally (e.g., via Docker or a standalone installation). If using Docker:
+
[source,bash]
----
docker run -it --rm --name artemis -p 8161:8161 -p 61616:61616 \
    -e ARTEMIS_USERNAME=artemis -e ARTEMIS_PASSWORD=artemis \
    apache/activemq-artemis:latest-alpine
----
+
This command starts an Artemis broker with <code>artemis</code>/<code>artemis</code> as credentials on <code>tcp://localhost:61616</code>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p><strong>Create a new Quarkus project:</strong>
+
[source,bash]
----
mvn io.quarkus.platform:quarkus-maven-plugin:3.8.3:create \
    -DprojectGroupId=org.quarkus.artemis \
    -DprojectArtifactId=artemis-config-example \
    -Dextensions="artemis-jms,resteasy-reactive" \
    -DnoTests
cd artemis-config-example
----
+
This creates a basic Quarkus project with the <code>artemis-jms</code> extension included.</p>
</li>
<li>
<p><strong>Configure <code>application.properties</code>:</strong>
+
Open <code>src/main/resources/application.properties</code> and add the following:
+
[source,properties]
----
# Basic connection to ActiveMQ Artemis
quarkus.artemis.url=tcp://localhost:61616
quarkus.artemis.username=artemis
quarkus.artemis.password=artemis
quarkus.artemis.client-id=my-first-quarkus-app
quarkus.artemis.pool.enabled=true
quarkus.artemis.pool.max-pool-size=5
----</p>
</li>
<li>
<p><strong>Create a simple Quarkus component to verify connection:</strong>
+
Create a new Java class <code>src/main/java/org/quarkus/artemis/ArtemisConnectionCheck.java</code>:
+
[source,java]
----
package org.quarkus.artemis;</p>
<div class="literalblock">
<div class="content">
<pre>import jakarta.enterprise.context.ApplicationScoped;
import jakarta.enterprise.event.Observes;
import jakarta.inject.Inject;
import jakarta.jms.Connection;
import jakarta.jms.ConnectionFactory;
import jakarta.jms.JMSException;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>import io.quarkus.runtime.StartupEvent;
import org.jboss.logging.Logger;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@ApplicationScoped
public class ArtemisConnectionCheck {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final Logger LOG = Logger.getLogger(ArtemisConnectionCheck.class);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Inject
ConnectionFactory connectionFactory; // Injects the default connection factory</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    void onStart(@Observes StartupEvent ev) {
        LOG.info("The application is starting...");
        try (Connection connection = connectionFactory.createConnection()) {
            LOG.info("Successfully connected to ActiveMQ Artemis at " + connection.getMetaData().getJMSProviderName());
        } catch (JMSException e) {
            LOG.error("Failed to connect to ActiveMQ Artemis: " + e.getMessage(), e);
        }
    }
}
----
+
This component observes the Quarkus `StartupEvent`, attempts to create a JMS connection using the injected `ConnectionFactory`, and logs the outcome.</pre>
</div>
</div>
</li>
<li>
<p><strong>Run the Quarkus application:</strong>
+
[source,bash]
----
mvn quarkus:dev
----
+
Observe the console output. You should see a log message similar to:
+
[source,text]
----
&#8230;&#8203;
INFO  org.quarkus.artemis.ArtemisConnectionCheck - The application is starting&#8230;&#8203;
INFO  org.quarkus.artemis.ArtemisConnectionCheck - Successfully connected to ActiveMQ Artemis at ActiveMQ Artemis JMS Provider
&#8230;&#8203;
----
+
If the connection fails, you will see an <code>ERROR</code> message indicating the problem (e.g., connection refused, invalid credentials). Ensure your Artemis broker is running and accessible at <code>localhost:61616</code> with the specified credentials.</p>
</li>
<li>
<p><strong>Stop the application:</strong>
+
Press <code>q</code> in the terminal where <code>mvn quarkus:dev</code> is running.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hands-on activity demonstrates the basic configuration and verification of a Quarkus application connecting to ActiveMQ Artemis.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_troubleshooting_common_configuration_issues"><a class="anchor" href="#_troubleshooting_common_configuration_issues"></a>Troubleshooting Common Configuration Issues</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Connection Refused</strong>:</p>
</li>
<li>
<p><strong>Cause</strong>: The Artemis broker is not running, or it&#8217;s not accessible at the specified <code>url</code> and <code>port</code>. Firewall rules might also be blocking the connection.</p>
</li>
<li>
<p><strong>Resolution</strong>: Verify the Artemis broker status. Check the broker&#8217;s listener configuration. Ensure the <code>url</code> in <code>application.properties</code> is correct. Open necessary firewall ports.</p>
</li>
<li>
<p><strong>Authentication Failure</strong>:</p>
</li>
<li>
<p><strong>Cause</strong>: Incorrect <code>username</code> or <code>password</code> in <code>application.properties</code>.</p>
</li>
<li>
<p><strong>Resolution</strong>: Double-check credentials against the Artemis broker&#8217;s security configuration.</p>
</li>
<li>
<p><strong>SSL Handshake Failure</strong>:</p>
</li>
<li>
<p><strong>Cause</strong>: Issues with trust stores, key stores, or certificate validation. The client might not trust the broker&#8217;s certificate, or the broker might not trust the client&#8217;s certificate (for mutual TLS).</p>
</li>
<li>
<p><strong>Resolution</strong>: Verify <code>trust-store</code> and <code>key-store</code> paths and passwords. Ensure the trust store contains the correct CA certificates. Check broker logs for SSL-related errors.</p>
</li>
<li>
<p><strong>No Such Method Error/Class Not Found</strong>:</p>
</li>
<li>
<p><strong>Cause</strong>: Dependency conflicts or missing dependencies.</p>
</li>
<li>
<p><strong>Resolution</strong>: Ensure <code>quarkus-artemis-jms</code> or <code>quarkus-smallrye-reactive-messaging-amqp</code> (or other relevant extensions) are correctly added to your <code>pom.xml</code> (or <code>build.gradle</code>). Check <code>mvn dependency:tree</code> for conflicts.</p>
</li>
<li>
<p><strong>Connection Pooling Exhaustion</strong>:</p>
</li>
<li>
<p><strong>Cause</strong>: The application is attempting to use more connections than <code>max-pool-size</code>, or connections are not being properly closed (though the pool manages this, very high demand can lead to this).</p>
</li>
<li>
<p><strong>Resolution</strong>: Increase <code>max-pool-size</code> if necessary, or analyze your application&#8217;s connection usage patterns. Ensure your application is designed to release resources.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Proper configuration is the first step towards building robust messaging applications with Quarkus and ActiveMQ Artemis, ensuring reliable and secure communication.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
